{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useRef, useEffect } from \"react\";\nconst useWebSocket = (url, onMessage, onReconnectDelay = 1000) => {\n  _s();\n  const socketRef = useRef(null);\n  useEffect(() => {\n    const connectWebSocket = () => {\n      socketRef.current = new WebSocket(url);\n      socketRef.current.onopen = () => {\n        console.log(\"WebSocket connected\");\n      };\n      socketRef.current.onmessage = event => {\n        if (onMessage) {\n          const data = JSON.parse(event.data);\n          onMessage(data);\n        }\n      };\n      socketRef.current.onclose = () => {\n        console.warn(\"WebSocket closed. Reconnecting...\");\n        setTimeout(connectWebSocket, onReconnectDelay);\n      };\n      socketRef.current.onerror = error => {\n        console.error(\"WebSocket error:\", error);\n        socketRef.current.close();\n      };\n    };\n    connectWebSocket();\n    return () => {\n      if (socketRef.current) {\n        socketRef.current.close();\n      }\n    };\n  }, [url, onMessage, onReconnectDelay]);\n  const sendMessage = message => {\n    if (socketRef.current && socketRef.current.readyState === WebSocket.OPEN) {\n      socketRef.current.send(JSON.stringify(message));\n    } else {\n      console.warn(\"WebSocket is not open. Message not sent:\", message);\n    }\n  };\n  return sendMessage;\n};\n_s(useWebSocket, \"8c0rAI93JE8jpOVTnobt43KkFfY=\");\nexport default useWebSocket;","map":{"version":3,"names":["useRef","useEffect","useWebSocket","url","onMessage","onReconnectDelay","_s","socketRef","connectWebSocket","current","WebSocket","onopen","console","log","onmessage","event","data","JSON","parse","onclose","warn","setTimeout","onerror","error","close","sendMessage","message","readyState","OPEN","send","stringify"],"sources":["C:/Users/USER/Downloads/BamSheet/my-spreadsheet-app/bamapp/src/components/useWebSocket.js"],"sourcesContent":["import { useRef, useEffect } from \"react\";\r\n\r\nconst useWebSocket = (url, onMessage, onReconnectDelay = 1000) => {\r\n  const socketRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const connectWebSocket = () => {\r\n      socketRef.current = new WebSocket(url);\r\n\r\n      socketRef.current.onopen = () => {\r\n        console.log(\"WebSocket connected\");\r\n      };\r\n\r\n      socketRef.current.onmessage = (event) => {\r\n        if (onMessage) {\r\n          const data = JSON.parse(event.data);\r\n          onMessage(data);\r\n        }\r\n      };\r\n\r\n      socketRef.current.onclose = () => {\r\n        console.warn(\"WebSocket closed. Reconnecting...\");\r\n        setTimeout(connectWebSocket, onReconnectDelay);\r\n      };\r\n\r\n      socketRef.current.onerror = (error) => {\r\n        console.error(\"WebSocket error:\", error);\r\n        socketRef.current.close();\r\n      };\r\n    };\r\n\r\n    connectWebSocket();\r\n\r\n    return () => {\r\n      if (socketRef.current) {\r\n        socketRef.current.close();\r\n      }\r\n    };\r\n  }, [url, onMessage, onReconnectDelay]);\r\n\r\n  const sendMessage = (message) => {\r\n    if (socketRef.current && socketRef.current.readyState === WebSocket.OPEN) {\r\n      socketRef.current.send(JSON.stringify(message));\r\n    } else {\r\n      console.warn(\"WebSocket is not open. Message not sent:\", message);\r\n    }\r\n  };\r\n\r\n  return sendMessage;\r\n};\r\n\r\nexport default useWebSocket;\r\n"],"mappings":";AAAA,SAASA,MAAM,EAAEC,SAAS,QAAQ,OAAO;AAEzC,MAAMC,YAAY,GAAGA,CAACC,GAAG,EAAEC,SAAS,EAAEC,gBAAgB,GAAG,IAAI,KAAK;EAAAC,EAAA;EAChE,MAAMC,SAAS,GAAGP,MAAM,CAAC,IAAI,CAAC;EAE9BC,SAAS,CAAC,MAAM;IACd,MAAMO,gBAAgB,GAAGA,CAAA,KAAM;MAC7BD,SAAS,CAACE,OAAO,GAAG,IAAIC,SAAS,CAACP,GAAG,CAAC;MAEtCI,SAAS,CAACE,OAAO,CAACE,MAAM,GAAG,MAAM;QAC/BC,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC;MACpC,CAAC;MAEDN,SAAS,CAACE,OAAO,CAACK,SAAS,GAAIC,KAAK,IAAK;QACvC,IAAIX,SAAS,EAAE;UACb,MAAMY,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACH,KAAK,CAACC,IAAI,CAAC;UACnCZ,SAAS,CAACY,IAAI,CAAC;QACjB;MACF,CAAC;MAEDT,SAAS,CAACE,OAAO,CAACU,OAAO,GAAG,MAAM;QAChCP,OAAO,CAACQ,IAAI,CAAC,mCAAmC,CAAC;QACjDC,UAAU,CAACb,gBAAgB,EAAEH,gBAAgB,CAAC;MAChD,CAAC;MAEDE,SAAS,CAACE,OAAO,CAACa,OAAO,GAAIC,KAAK,IAAK;QACrCX,OAAO,CAACW,KAAK,CAAC,kBAAkB,EAAEA,KAAK,CAAC;QACxChB,SAAS,CAACE,OAAO,CAACe,KAAK,CAAC,CAAC;MAC3B,CAAC;IACH,CAAC;IAEDhB,gBAAgB,CAAC,CAAC;IAElB,OAAO,MAAM;MACX,IAAID,SAAS,CAACE,OAAO,EAAE;QACrBF,SAAS,CAACE,OAAO,CAACe,KAAK,CAAC,CAAC;MAC3B;IACF,CAAC;EACH,CAAC,EAAE,CAACrB,GAAG,EAAEC,SAAS,EAAEC,gBAAgB,CAAC,CAAC;EAEtC,MAAMoB,WAAW,GAAIC,OAAO,IAAK;IAC/B,IAAInB,SAAS,CAACE,OAAO,IAAIF,SAAS,CAACE,OAAO,CAACkB,UAAU,KAAKjB,SAAS,CAACkB,IAAI,EAAE;MACxErB,SAAS,CAACE,OAAO,CAACoB,IAAI,CAACZ,IAAI,CAACa,SAAS,CAACJ,OAAO,CAAC,CAAC;IACjD,CAAC,MAAM;MACLd,OAAO,CAACQ,IAAI,CAAC,0CAA0C,EAAEM,OAAO,CAAC;IACnE;EACF,CAAC;EAED,OAAOD,WAAW;AACpB,CAAC;AAACnB,EAAA,CA/CIJ,YAAY;AAiDlB,eAAeA,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}