{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{BrowserRouter as Router,Routes,Route,Navigate,Link}from\"react-router-dom\";import Login from\"./components/Login\";// import Register from \"./components/Register\";\nimport Home from\"./home\";import Profile from\"./components/Profile\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const App=()=>{const[auth,setAuth]=useState({isAuthenticated:false,user:null});useEffect(()=>{const checkAuth=async()=>{const token=localStorage.getItem(\"token\");const userName=localStorage.getItem(\"username\");if(token){try{setAuth({isAuthenticated:true,user:userName});}catch(error){console.error(\"Error fetching user data:\",error);localStorage.removeItem(\"token\");localStorage.removeItem(\"username\");setAuth({isAuthenticated:false,user:null});}}};checkAuth();},[]);const handleLogout=()=>{localStorage.removeItem(\"token\");localStorage.removeItem(\"username\");setAuth({isAuthenticated:false,user:null});};return/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[auth.isAuthenticated&&/*#__PURE__*/_jsxs(\"nav\",{className:\"nav-profile\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"username\",children:localStorage.getItem(\"username\")}),/*#__PURE__*/_jsx(Link,{to:\"/profile\",children:/*#__PURE__*/_jsx(\"button\",{children:\"\\u041F\\u0435\\u0440\\u0435\\u0439\\u0442\\u0438 \\u0432 \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,children:\"\\u0412\\u044B\\u0439\\u0442\\u0438\"})]}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:auth.isAuthenticated?/*#__PURE__*/_jsx(Navigate,{to:\"/\"}):/*#__PURE__*/_jsx(Login,{setAuth:setAuth})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:auth.isAuthenticated?/*#__PURE__*/_jsx(Home,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:auth.isAuthenticated?/*#__PURE__*/_jsx(Profile,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"developer\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"https://t.me/web_gpy\",target:\"_blanc\",children:\"\\xA9 Web-GPY Software.\"}),\" \",\"2024 \\u0412\\u0441\\u0435 \\u043F\\u0440\\u0430\\u0432\\u0430 \\u0437\\u0430\\u0449\\u0438\\u0449\\u0435\\u043D\\u044B.\"]})]});};export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Navigate","Link","Login","Home","Profile","jsx","_jsx","jsxs","_jsxs","App","auth","setAuth","isAuthenticated","user","checkAuth","token","localStorage","getItem","userName","error","console","removeItem","handleLogout","children","className","to","onClick","path","element","href","target"],"sources":["C:/Users/USER/Downloads/BamSheet/my-spreadsheet-app/bamapp/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Routes,\r\n  Route,\r\n  Navigate,\r\n  Link,\r\n} from \"react-router-dom\";\r\nimport Login from \"./components/Login\";\r\n// import Register from \"./components/Register\";\r\nimport Home from \"./home\";\r\nimport Profile from \"./components/Profile\";\r\n\r\nconst App = () => {\r\n  const [auth, setAuth] = useState({\r\n    isAuthenticated: false,\r\n    user: null,\r\n  });\r\n\r\n  useEffect(() => {\r\n    const checkAuth = async () => {\r\n      const token = localStorage.getItem(\"token\");\r\n      const userName = localStorage.getItem(\"username\");\r\n      if (token) {\r\n        try {\r\n          setAuth({\r\n            isAuthenticated: true,\r\n            user: userName,\r\n          });\r\n        } catch (error) {\r\n          console.error(\"Error fetching user data:\", error);\r\n          localStorage.removeItem(\"token\");\r\n          localStorage.removeItem(\"username\");\r\n          setAuth({\r\n            isAuthenticated: false,\r\n            user: null,\r\n          });\r\n        }\r\n      }\r\n    };\r\n\r\n    checkAuth();\r\n  }, []);\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem(\"token\");\r\n    localStorage.removeItem(\"username\");\r\n    setAuth({ isAuthenticated: false, user: null });\r\n  };\r\n\r\n  return (\r\n    <Router>\r\n      <div>\r\n        {auth.isAuthenticated && (\r\n          <nav className=\"nav-profile\">\r\n            <span className=\"username\">{localStorage.getItem(\"username\")}</span>\r\n            <Link to=\"/profile\">\r\n              <button>Перейти в профиль</button>\r\n            </Link>\r\n            <button onClick={handleLogout}>Выйти</button>\r\n          </nav>\r\n        )}\r\n        <Routes>\r\n          <Route\r\n            path=\"/login\"\r\n            element={\r\n              auth.isAuthenticated ? (\r\n                <Navigate to=\"/\" />\r\n              ) : (\r\n                <Login setAuth={setAuth} />\r\n              )\r\n            }\r\n          />\r\n          {/* <Route\r\n            path=\"/register\"\r\n            element={auth.isAuthenticated ? <Navigate to=\"/\" /> : <Register />}\r\n          /> */}\r\n          <Route\r\n            path=\"/\"\r\n            element={auth.isAuthenticated ? <Home /> : <Navigate to=\"/login\" />}\r\n          />\r\n          <Route\r\n            path=\"/profile\"\r\n            element={\r\n              auth.isAuthenticated ? <Profile /> : <Navigate to=\"/login\" />\r\n            }\r\n          />\r\n        </Routes>\r\n      </div>\r\n      <div className=\"developer\">\r\n        <a href=\"https://t.me/web_gpy\" target=\"_blanc\">\r\n          &copy; Web-GPY Software.\r\n        </a>{\" \"}\r\n        2024 Все права защищены.\r\n      </div>\r\n    </Router>\r\n  );\r\n};\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}