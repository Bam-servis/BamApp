{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{BrowserRouter as Router,Routes,Route,Navigate,Link}from\"react-router-dom\";import Login from\"./components/Login\";import Register from\"./components/Register\";import Home from\"./home\";import Profile from\"./components/Profile\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const App=()=>{const[auth,setAuth]=useState({isAuthenticated:false,user:null});useEffect(()=>{const checkAuth=async()=>{const token=localStorage.getItem(\"token\");const userName=localStorage.getItem(\"username\");if(token){try{setAuth({isAuthenticated:true,user:userName});}catch(error){console.error(\"Error fetching user data:\",error);localStorage.removeItem(\"token\");localStorage.removeItem(\"username\");setAuth({isAuthenticated:false,user:null});}}};checkAuth();},[]);const handleLogout=()=>{localStorage.removeItem(\"token\");localStorage.removeItem(\"username\");setAuth({isAuthenticated:false,user:null});};return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(\"div\",{children:[auth.isAuthenticated&&/*#__PURE__*/_jsxs(\"nav\",{className:\"nav-profile\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"username\",children:localStorage.getItem(\"username\")}),/*#__PURE__*/_jsx(Link,{to:\"/profile\",children:/*#__PURE__*/_jsx(\"button\",{children:\"Go to Profile\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,children:\"Logout\"})]}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:auth.isAuthenticated?/*#__PURE__*/_jsx(Navigate,{to:\"/\"}):/*#__PURE__*/_jsx(Login,{setAuth:setAuth})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:auth.isAuthenticated?/*#__PURE__*/_jsx(Navigate,{to:\"/\"}):/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:auth.isAuthenticated?/*#__PURE__*/_jsx(Home,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:auth.isAuthenticated?/*#__PURE__*/_jsx(Profile,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/profile\"})})]})]})});};export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Navigate","Link","Login","Register","Home","Profile","jsx","_jsx","jsxs","_jsxs","App","auth","setAuth","isAuthenticated","user","checkAuth","token","localStorage","getItem","userName","error","console","removeItem","handleLogout","children","className","to","onClick","path","element"],"sources":["C:/Users/USER/Downloads/BamSheet/my-spreadsheet-app/bamapp/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Routes,\r\n  Route,\r\n  Navigate,\r\n  Link,\r\n} from \"react-router-dom\";\r\nimport Login from \"./components/Login\";\r\nimport Register from \"./components/Register\";\r\nimport Home from \"./home\";\r\nimport Profile from \"./components/Profile\";\r\n\r\nconst App = () => {\r\n  const [auth, setAuth] = useState({\r\n    isAuthenticated: false,\r\n    user: null,\r\n  });\r\n\r\n  useEffect(() => {\r\n    const checkAuth = async () => {\r\n      const token = localStorage.getItem(\"token\");\r\n      const userName = localStorage.getItem(\"username\");\r\n      if (token) {\r\n        try {\r\n          setAuth({\r\n            isAuthenticated: true,\r\n            user: userName,\r\n          });\r\n        } catch (error) {\r\n          console.error(\"Error fetching user data:\", error);\r\n          localStorage.removeItem(\"token\");\r\n          localStorage.removeItem(\"username\");\r\n          setAuth({\r\n            isAuthenticated: false,\r\n            user: null,\r\n          });\r\n        }\r\n      }\r\n    };\r\n\r\n    checkAuth();\r\n  }, []);\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem(\"token\");\r\n    localStorage.removeItem(\"username\");\r\n    setAuth({ isAuthenticated: false, user: null });\r\n  };\r\n\r\n  return (\r\n    <Router>\r\n      <div>\r\n        {auth.isAuthenticated && (\r\n          <nav className=\"nav-profile\">\r\n            <span className=\"username\">{localStorage.getItem(\"username\")}</span>\r\n            <Link to=\"/profile\">\r\n              <button>Go to Profile</button>\r\n            </Link>\r\n            <button onClick={handleLogout}>Logout</button>\r\n          </nav>\r\n        )}\r\n        <Routes>\r\n          <Route\r\n            path=\"/login\"\r\n            element={\r\n              auth.isAuthenticated ? (\r\n                <Navigate to=\"/\" />\r\n              ) : (\r\n                <Login setAuth={setAuth} />\r\n              )\r\n            }\r\n          />\r\n          <Route\r\n            path=\"/register\"\r\n            element={auth.isAuthenticated ? <Navigate to=\"/\" /> : <Register />}\r\n          />\r\n          <Route\r\n            path=\"/\"\r\n            element={auth.isAuthenticated ? <Home /> : <Navigate to=\"/login\" />}\r\n          />\r\n          <Route\r\n            path=\"/profile\"\r\n            element={\r\n              auth.isAuthenticated ? <Profile /> : <Navigate to=\"/profile\" />\r\n            }\r\n          />\r\n        </Routes>\r\n      </div>\r\n    </Router>\r\n  );\r\n};\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}